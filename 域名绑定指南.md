# 域名绑定指南 - hljs.qzz.io

## 域名信息
- 主域名：qzz.io
- 子域名：hljs.qzz.io
- 服务器IP：60.205.195.58

---

## 第一步：配置 DNS 解析

### 1.1 登录域名管理后台

登录你购买域名的服务商（阿里云/腾讯云/Cloudflare 等）

### 1.2 添加 DNS 解析记录

在 DNS 解析设置中，添加以下记录：

| 记录类型 | 主机记录 | 记录值 | TTL |
|---------|---------|--------|-----|
| A | hljs | 60.205.195.58 | 600 |

**具体操作：**
- **记录类型**：选择 `A`
- **主机记录**：填写 `hljs`（不要写完整域名）
- **记录值**：填写 `60.205.195.58`
- **TTL**：选择 `600` 或 `10分钟`（默认即可）

### 1.3 等待 DNS 生效

DNS 解析通常需要 5-10 分钟生效，最长可能需要 24 小时。

**检查 DNS 是否生效：**

Windows 系统打开 CMD，执行：
```cmd
ping hljs.qzz.io
```

如果返回 `60.205.195.58`，说明 DNS 已生效。

---

## 第二步：在宝塔面板绑定域名

### 2.1 登录宝塔面板

访问：`http://60.205.195.58:8888`

### 2.2 修改网站域名

1. 点击左侧菜单 **"网站"**
2. 找到你的网站（hailin-blog）
3. 点击右侧的 **"设置"** 按钮
4. 在 **"域名管理"** 标签中：
   - 点击 **"添加域名"**
   - 输入：`hljs.qzz.io`
   - 点击 **"添加"**

### 2.3 设置主域名（可选）

如果你想让 `hljs.qzz.io` 成为主域名：
- 在域名列表中，点击 `hljs.qzz.io` 右侧的 **"设为主域名"**

---

## 第三步：配置 SSL 证书（推荐）

配置 HTTPS 可以让网站更安全，浏览器不会显示"不安全"警告。

### 3.1 申请免费 SSL 证书

1. 在网站设置中，点击 **"SSL"** 标签
2. 选择 **"Let's Encrypt"**
3. 填写配置：
   - **域名**：勾选 `hljs.qzz.io`
   - **邮箱**：填写你的邮箱（用于证书到期提醒）
4. 点击 **"申请"** 按钮
5. 等待几秒钟，证书申请成功

### 3.2 开启强制 HTTPS

1. 在 SSL 页面，找到 **"强制HTTPS"** 开关
2. 点击开启
3. 这样访问 `http://hljs.qzz.io` 会自动跳转到 `https://hljs.qzz.io`

### 3.3 开启 HSTS（可选，增强安全性）

在 SSL 页面，开启 **"HSTS"** 开关，可以防止中间人攻击。

---

## 第四步：验证配置

### 4.1 访问网站

在浏览器中访问：
- `http://hljs.qzz.io`
- `https://hljs.qzz.io`（如果配置了SSL）

### 4.2 检查路由功能

测试以下链接是否正常：
- `https://hljs.qzz.io/` - 首页
- `https://hljs.qzz.io/articles` - 文章页
- `https://hljs.qzz.io/videos` - 视频页
- `https://hljs.qzz.io/about` - 关于页
- `https://hljs.qzz.io/contact` - 联系页

刷新页面，确保不会出现 404 错误。

---

## 第五步：更新项目配置（如果需要）

如果你的项目中有硬编码的域名或 API 地址，需要更新：

### 5.1 检查配置文件

查看项目中是否有以下文件需要更新：
- `.env` 或 `.env.production`
- `src/config.js`
- API 请求的 baseURL

### 5.2 如果有 API 接口

如果你的项目需要调用后端 API，确保：
1. API 服务器已配置 CORS 允许 `hljs.qzz.io`
2. 更新前端代码中的 API 地址

---

## 常见问题

### 1. DNS 解析不生效

**检查方法：**
```cmd
nslookup hljs.qzz.io
```

**可能原因：**
- DNS 还在传播中，等待 10-30 分钟
- 解析记录配置错误，检查主机记录是否为 `hljs`
- 本地 DNS 缓存，清除缓存：
  ```cmd
  ipconfig /flushdns
  ```

### 2. 访问域名显示其他网站

**原因**：宝塔面板有多个网站，域名绑定到了错误的站点

**解决**：
1. 检查其他网站是否也绑定了 `hljs.qzz.io`
2. 删除其他站点的该域名绑定
3. 确保只在你的博客站点绑定该域名

### 3. SSL 证书申请失败

**可能原因：**
- DNS 解析未生效，等待 DNS 生效后再申请
- 80 端口未开放，检查防火墙和安全组
- 域名已经申请过证书，等待几分钟后重试

**解决方法：**
1. 确认 DNS 已解析到正确 IP
2. 确认 80 端口可访问
3. 查看宝塔面板的错误日志

### 4. HTTPS 访问显示不安全

**原因**：页面中有 HTTP 资源（混合内容）

**解决**：
1. 检查代码中的图片、视频等资源链接
2. 将所有 `http://` 改为 `https://` 或使用相对路径
3. 检查浏览器控制台的警告信息

### 5. 子域名无法访问，但主域名可以

**原因**：DNS 只配置了主域名

**解决**：
- 确认已添加 `hljs` 的 A 记录
- 不要添加 `hljs.qzz.io` 的 A 记录（这是错误的）
- 主机记录只填 `hljs`

---

## 配置检查清单

完成以下检查，确保配置正确：

- [ ] DNS 解析已添加（A 记录，主机记录：hljs，记录值：60.205.195.58）
- [ ] DNS 已生效（ping 命令返回正确 IP）
- [ ] 宝塔面板已绑定域名 hljs.qzz.io
- [ ] 网站可以通过域名访问
- [ ] SSL 证书已申请并部署（推荐）
- [ ] 强制 HTTPS 已开启（推荐）
- [ ] 所有路由页面都能正常访问
- [ ] 刷新页面不会出现 404

---

## Nginx 配置参考

绑定域名后，Nginx 配置会自动更新为：

```nginx
server {
    listen 80;
    listen 443 ssl http2;
    server_name hljs.qzz.io;
    
    # SSL 证书配置（如果申请了证书）
    ssl_certificate /www/server/panel/vhost/cert/hljs.qzz.io/fullchain.pem;
    ssl_certificate_key /www/server/panel/vhost/cert/hljs.qzz.io/privkey.pem;
    
    root /www/wwwroot/hailin-blog;
    index index.html;
    
    # Vue Router 配置
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # 静态资源缓存
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|mp4|mp3)$ {
        expires 7d;
        add_header Cache-Control "public, immutable";
    }
}

# 强制 HTTPS 跳转
server {
    listen 80;
    server_name hljs.qzz.io;
    return 301 https://$server_name$request_uri;
}
```

---

## 完成！

配置完成后，你的博客可以通过以下地址访问：

- **HTTP**：http://hljs.qzz.io
- **HTTPS**：https://hljs.qzz.io（推荐）

建议使用 HTTPS 访问，更安全且浏览器不会显示警告。

---

## 下一步建议

1. **配置 CDN 加速**：提升访问速度
2. **设置网站备份**：定期备份网站数据
3. **监控网站状态**：使用宝塔的监控功能
4. **优化 SEO**：添加网站地图、robots.txt
5. **配置网站统计**：如百度统计、Google Analytics

🎉 **恭喜！你的博客已成功绑定域名！**
